<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Upload - Lively Video Documentation</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="..">Lively Video Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../svcUpload/">svcUpload</a>
                    </li>
                
                
                
                    <li class="active">
                        <a href="./">Upload</a>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../svcUpload/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li class="disabled">
                        <a rel="prev" >
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#lively-upload">Lively Upload</a></li>
        
            <li><a href="#installation">Installation</a></li>
        
            <li><a href="#usage">Usage</a></li>
        
            <li><a href="#configuration">Configuration</a></li>
        
            <li><a href="#configuration-options">Configuration Options</a></li>
        
            <li><a href="#events">Events</a></li>
        
            <li><a href="#event-list">Event List</a></li>
        
            <li><a href="#compatibility">Compatibility</a></li>
        
            <li><a href="#legacy-support">Legacy Support</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="lively-upload">Lively Upload</h1>
<h2 id="installation">Installation</h2>
<pre><code class="bash">npm install @livelyvideo/upload --save
</code></pre>

<h2 id="usage">Usage</h2>
<blockquote>
<p>Latest Version: v0.1.0</p>
</blockquote>
<p>NPM</p>
<pre><code class="javascript">// With UI
import LivelyUpload from '@livelyvideo/upload';
const upload = new LivelyUpload(element, options);

// Without UI
import LivelyUploadCore from '@livelyvideo/upload/dist/core';
const uploadCore = new LivelyUploadCore(element, options);
</code></pre>

<p>Script</p>
<pre><code class="html">&lt;script type='text/javascript' src='/upload/dist/index.min.js'&gt;&lt;/script&gt;
</code></pre>

<pre><code class="javascript">const upload = new LivelyUpload(document.querySelector('#upload'), {
    url: 'beta.livelyvideo.tv/api/upload',
    authUrl: 'beta.livelyvideo.tv/auth/v1/lively'
});
</code></pre>

<p>Styles</p>
<pre><code class="html">&lt;link rel='stylesheet' type='text/css' href='/upload/dist/upload.min.css' /&gt;
</code></pre>

<h2 id="configuration">Configuration</h2>
<p>You can customize your Lively Upload by passing an options object when instantiating the library.</p>
<p>Example config:</p>
<pre><code class="javascript">// new LivelyUpload(targetElement, options);
const upload = new LivelyUpload('#upload', {
    url: 'beta.livelyvideo.tv/api/upload',
    authUrl: 'beta.livelyvideo.tv/auth/v1/lively'
});
</code></pre>

<h2 id="configuration-options">Configuration Options</h2>
<blockquote>
<p>You can supply Upload and UploadForm with either a DOM Element or a selector tag.</p>
</blockquote>
<h4 id="upload">Upload</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>url</td>
<td>(string)</td>
<td>(Required) Route to your upload api.</td>
</tr>
<tr>
<td>authUrl</td>
<td>(string)</td>
<td>(Required) Route to your auth api.</td>
</tr>
<tr>
<td>token</td>
<td>(string)</td>
<td>Defaults to null. Use custom token.</td>
</tr>
<tr>
<td>redirect</td>
<td>(string)</td>
<td>Defaults to null. The redirect route to your results template for cross-origin form compatibility.</td>
</tr>
<tr>
<td>accept</td>
<td>(string)</td>
<td>Defaults to null. Sets the value of accept attribute on file input.</td>
</tr>
<tr>
<td>supportLegacy</td>
<td>(bool)</td>
<td>Defaults to true. Turn legacy support on or off.</td>
</tr>
<tr>
<td>forceLegacy</td>
<td>(bool)</td>
<td>Defaults to false. Helpful option to force use of legacy form for debugging.</td>
</tr>
<tr>
<td>autoSubmit</td>
<td>(bool)</td>
<td>Defaults to true. Automatically upload file when added to the uploader.</td>
</tr>
<tr>
<td>MESSAGES</td>
<td>(object)</td>
<td>(Localization) Object containing list of message names and message strings.</td>
</tr>
</tbody>
</table>
<h4 id="uploadform">UploadForm</h4>
<blockquote>
<p>The UploadForm library includes Upload options in addition to these.</p>
</blockquote>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>pause</td>
<td>(bool)</td>
<td>Defaults to true. Enables pause button.</td>
</tr>
<tr>
<td>cancel</td>
<td>(bool)</td>
<td>Defaults to true. Enables cancel button.</td>
</tr>
</tbody>
</table>
<h2 id="events">Events</h2>
<p>The Upload library triggers events when processing files, which you can register to by listening to your instance.</p>
<p>Example listener:</p>
<pre><code class="javascript">import LivelyUpload from '@livelyvideo/upload';

const myUpload = new LivelyUpload(element, {
    url: 'beta.livelyvideo.tv/api/upload',
    authUrl: 'beta.livelyvideo.tv/auth/v1/lively'
});

// myUpload.on(eventName, callbackFunction);
myUpload.on('start', () =&gt; {
    alert('My upload has started!');
});
</code></pre>

<h2 id="event-list">Event List</h2>
<h4 id="upload_1">Upload</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Params</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>(file)</td>
<td>Called at beginning of upload request.</td>
</tr>
<tr>
<td>success</td>
<td>(file)</td>
<td>Called after successful upload.</td>
</tr>
<tr>
<td>failure</td>
<td>(file, reason)</td>
<td>Called after upload failure.</td>
</tr>
<tr>
<td>addedfile</td>
<td>(file)</td>
<td>Called when file has been added to input.</td>
</tr>
<tr>
<td>config</td>
<td>(data)</td>
<td>Called on instatiation. Data object contains maxFileSize</td>
</tr>
<tr>
<td>progress</td>
<td>(currentBytes, totalBytes)</td>
<td>Called after chunk has been uploaded. (Not supported in legacy mode)</td>
</tr>
<tr>
<td>thumbnail</td>
<td>(file, dataUrl)</td>
<td>Called after thumbnail has been generated. (Not supported in legacy mode)</td>
</tr>
</tbody>
</table>
<h4 id="uploadform_1">UploadForm</h4>
<blockquote>
<p>The UploadForm library includes drag and drop events in addition to Upload events.</p>
</blockquote>
<table>
<thead>
<tr>
<th>Name</th>
<th>Params</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>drop</td>
<td>(event)</td>
<td>The user has dropped something into the UploadForm.</td>
</tr>
<tr>
<td>drag</td>
<td>(event)</td>
<td>The user is dragging.</td>
</tr>
<tr>
<td>dragstart</td>
<td>(event)</td>
<td>The user started to drag.</td>
</tr>
<tr>
<td>dragend</td>
<td>(event)</td>
<td>The user has stopped dragging.</td>
</tr>
<tr>
<td>dragenter</td>
<td>(event)</td>
<td>The user dragged a file into the UploadForm.</td>
</tr>
<tr>
<td>dragover</td>
<td>(event)</td>
<td>The user is dragging a file over the UploadForm.</td>
</tr>
<tr>
<td>dragleave</td>
<td>(event)</td>
<td>The user dragged a file out of the UploadForm.</td>
</tr>
</tbody>
</table>
<h2 id="compatibility">Compatibility</h2>
<ul>
<li>Chrome 7+</li>
<li>Firefox 4+</li>
<li>IE 10+</li>
<li>Opera 12+</li>
<li>Safari 6+</li>
</ul>
<h2 id="legacy-support">Legacy Support</h2>
<p>For browser that do not have access to HTML5 Drag and Drop and FileReader the uploader can falls back to an old form submission.</p>
<h4 id="cross-site-iframe-transport-uploads">Cross-site iframe transport uploads</h4>
<p>Legacy support async upload technique, by targeting an iframe on form submission.
Unfortunately, it is not possible to access the response body of iframes on a different domain.</p>
<p>Therefore Cross-site iframe transport uploads require a redirect back to a callback page on the origin server.  All this page needs to do is render json for the client to parse out the results of the upload.  The callback page should look like this:</p>
<pre><code class="html">&lt;!DOCTYPE HTML&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot;&gt;
        &lt;title&gt;Result Page&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;%= response %&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>The api will send back a response which will need to be decoded by your server. The result.html page adds the decoded result content as body content. This allows the plugin to access the response without cross-domain access issues.</p>
<p>Example redirect URL sent back to the client:</p>
<pre><code>http://mydomain.com/result?%7Bstatus:200,reason:%7BSUCCESS_KEY%7D%7D
</code></pre>

<p>Example body content decoded by the result.html page:</p>
<pre><code class="json">{&quot;status&quot;:200,&quot;reason&quot;:{'SUCCESS_KEY'}}
</code></pre></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
